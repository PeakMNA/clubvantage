# Golf Tee Sheet Check-in Feature Design

## Overview

This document specifies the redesigned check-in process for the golf tee sheet. The new design supports individual player check-in (replacing the current flight-based approach) with integrated payment settlement and starter ticket generation.

## Key Design Decisions

1. **Individual Player Check-in**: Check-in operates at the player level, not flight level
2. **Two Payment Types**: Pre-paid (online) and pay-at-check-in
3. **Simple POS Integration**: Optional POS module with basic payment capture
4. **Settlement at Check-in**: Payment and check-in happen together
5. **Per-Item Tax Support**: Each line item can have different tax treatment
6. **Configurable Payment Methods**: Club-defined payment options
7. **Starter Ticket Generation**: Auto or manual with optional printing

---

## Data Models

### Tax Types

```typescript
type TaxType = 'add' | 'include' | 'none';
// add: Tax added on top of base price
// include: Tax already included in price
// none: No tax applied
```

### Booking Line Item

```typescript
interface BookingLineItem {
  id: string;
  type: 'green_fee' | 'cart' | 'caddy' | 'rental';
  description: string;
  baseAmount: number;      // Price before tax
  taxType: TaxType;
  taxRate: number;         // Percentage (e.g., 7 for 7%)
  taxAmount: number;       // Calculated tax
  netAmount: number;       // Amount after tax extraction (for 'include')
  totalAmount: number;     // Final amount to charge
  isPaid: boolean;
  paidAt?: Date;
  paidVia?: PaymentMethod;
  reference?: string;      // Transaction reference
}
```

### Player Payment Info

```typescript
interface PlayerPaymentInfo {
  playerId: string;
  lineItems: BookingLineItem[];
  subtotal: number;        // Sum of base amounts
  totalTax: number;        // Sum of tax amounts
  grandTotal: number;      // Total to pay
  paidOnline: number;      // Amount paid online
  balanceDue: number;      // grandTotal - paidOnline
  settledAt?: Date;
  settledVia?: PaymentMethod;
  settledBy?: string;      // Staff user ID
}
```

### Payment Method Configuration

```typescript
interface PaymentMethodConfig {
  id: string;
  name: string;            // Display name
  icon: string;            // Icon identifier
  type: 'cash' | 'card' | 'transfer' | 'account' | 'custom';
  isEnabled: boolean;
  requiresReference: boolean;
  opensPOS: boolean;       // If true, opens POS terminal
  sortOrder: number;
}
```

### Check-in Settings

```typescript
interface CheckInSettings {
  policy: {
    allowPartialPayment: boolean;
    blockSuspendedMembers: boolean;
    showSuspensionReason: boolean;
    requireAllLineItemsPaid: boolean;
  };

  paymentMethods: PaymentMethodConfig[];

  tax: {
    defaultRate: number;
    defaultType: TaxType;
    overrides: Array<{
      itemType: 'green_fee' | 'cart' | 'caddy' | 'rental';
      rate: number;
      type: TaxType;
    }>;
    display: {
      showBreakdownOnReceipt: boolean;
      showTypeIndicator: boolean;
      taxLabel: string;     // e.g., "VAT", "GST", "Tax"
    };
  };

  starterTicket: {
    generateOn: 'check_in' | 'settlement' | 'manual';
    autoGenerate: boolean;
    defaultPrintOption: 'ticket' | 'receipt' | 'combined' | 'none';
    content: {
      showTeeTime: boolean;
      showCourse: boolean;
      showStartingHole: boolean;
      showPlayerNames: boolean;
      showMemberNumbers: boolean;
      showCartNumber: boolean;
      showCaddyName: boolean;
      showRentalItems: boolean;
      showSpecialRequests: boolean;
      showQRCode: boolean;
    };
  };

  proShop: {
    allowAddAtCheckIn: boolean;
    showQuickAddItems: boolean;
    quickAddProductIds: string[];
    maxQuickAddItems: number;  // Recommended: 10
  };

  pos: {
    isConnected: boolean;
    provider?: string;
    terminalId?: string;
    config?: Record<string, unknown>;
  };
}
```

### Pro Shop Product

```typescript
interface ProShopCategory {
  id: string;
  name: string;
  description?: string;
  defaultTaxRate: number;
  defaultTaxType: TaxType;
  sortOrder: number;
  isActive: boolean;
  productCount?: number;   // Computed field
}

interface ProShopProduct {
  id: string;
  name: string;
  categoryId: string;
  sku?: string;
  description?: string;
  price: number;
  taxRate: number;
  taxType: TaxType;
  useCategoryDefaults: boolean;  // If true, inherit tax from category
  variants?: Array<{
    id: string;
    name: string;
    sku?: string;
    priceAdjustment: number;     // +/- from base price
  }>;
  isActive: boolean;
  isQuickAdd: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### Starter Ticket

```typescript
interface StarterTicket {
  id: string;
  flightId: string;
  ticketNumber: string;    // e.g., "ST-2026-0130-001"
  teeTime: Date;
  course: string;
  startingHole: number;
  players: Array<{
    name: string;
    memberNumber?: string;
    type: 'member' | 'guest' | 'dependent' | 'walkup';
  }>;
  cartNumber?: string;
  caddyName?: string;
  rentalItems?: string[];
  specialRequests?: string;
  qrCodeData?: string;
  generatedAt: Date;
  generatedBy: string;
  printedAt?: Date;
  reprintCount: number;
}
```

---

## UI Components

### 1. Check-in Modal

**Purpose**: Select players from a flight and initiate check-in/settlement flow.

**Trigger**: Click player row or "Check In" button on tee sheet.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check In Players                                        [X] â”‚
â”‚ Flight: 8:30 AM Â· Hole 1 Â· Lake Course                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Select players to check in:                                 â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [âœ“] John Smith (M)                      âœ“ Pre-paid      â”‚ â”‚
â”‚ â”‚     Green Fee: $150 Â· Cart: $40                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [âœ“] Jane Doe (G)                        $ Pay at desk   â”‚ â”‚
â”‚ â”‚     Green Fee: $180 Â· Cart: $40                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [ ] Bob Wilson (M)                      â— Already in    â”‚ â”‚
â”‚ â”‚     Checked in at 8:15 AM                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ âš  Sarah Lee is suspended (Payment overdue)      [Details]   â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Selected: 2 players Â· Total Due: $220.00                    â”‚
â”‚                                                             â”‚
â”‚                          [Cancel]  [Proceed to Settlement]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States**:
- **Empty**: No eligible players (all checked in) â†’ Show message with link to starter ticket
- **Loading**: Skeleton loaders for player cards
- **Suspended Member**: Disable selection, show warning with optional reason
- **Mixed Payment**: Show both pre-paid and pay-at-desk players

**Accessibility**:
- Tab order: Player checkboxes â†’ Details links â†’ Cancel â†’ Proceed
- Focus ring on all interactive elements
- Screen reader announces payment status for each player

**Keyboard Shortcuts**:
- `Space`: Toggle selected player
- `Enter`: Proceed to settlement (when button focused)
- `Escape`: Close modal

### 2. Settlement Modal

**Purpose**: Process payment for selected players.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Settlement                                              [X] â”‚
â”‚ 2 players Â· Flight 8:30 AM                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€ John Smith â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Green Fee (18 holes)              $150.00    âœ“ Pre-paid â”‚â”‚
â”‚ â”‚ Cart Rental (shared)               $40.00    âœ“ Pre-paid â”‚â”‚
â”‚ â”‚                                   â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚â”‚
â”‚ â”‚ Subtotal                          $190.00               â”‚â”‚
â”‚ â”‚ Tax (7% included)                  $12.43               â”‚â”‚
â”‚ â”‚                                   â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚â”‚
â”‚ â”‚ Total                             $190.00   âœ“ SETTLED   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Jane Doe â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Green Fee (18 holes)              $180.00    â—‹ Unpaid   â”‚â”‚
â”‚ â”‚ Cart Rental (shared)               $40.00    â—‹ Unpaid   â”‚â”‚
â”‚ â”‚                                   â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚â”‚
â”‚ â”‚ Subtotal                          $220.00               â”‚â”‚
â”‚ â”‚ Tax (7% added)                     $15.40               â”‚â”‚
â”‚ â”‚                                   â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚â”‚
â”‚ â”‚ Total                             $235.40   $ DUE       â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ [+ Add Pro Shop Item]                                   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Balance Due                                       $235.40   â”‚
â”‚                                                             â”‚
â”‚ Payment Method:                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚  ğŸ’µ    â”‚ â”‚  ğŸ“±    â”‚ â”‚  ğŸ’³    â”‚ â”‚  ğŸ‘¤ Member     â”‚        â”‚
â”‚ â”‚  Cash  â”‚ â”‚Transferâ”‚ â”‚  Card  â”‚ â”‚    Account     â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ [Back]                              [Cancel]  [Pay $235.40] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pro Shop Item Addition**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Pro Shop Item                                       [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” Search products...                                       â”‚
â”‚                                                             â”‚
â”‚ Quick Add:                                                  â”‚
â”‚ [Golf Balls $12] [Gloves $25] [Tees $5] [Drinks $4]        â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ Categories:                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ Apparel      â”‚ â”‚ Equipment    â”‚ â”‚ Accessories  â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚ Products:                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Pro V1 Golf Balls (Dozen)                      $54.99 + â”‚ â”‚
â”‚ â”‚ Titleist Cap                                   $32.00 + â”‚ â”‚
â”‚ â”‚ FootJoy Glove (M/L/XL)                         $25.00 + â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚                                           [Cancel] [Add]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Payment Processing States**:
1. **Idle**: Ready for payment method selection
2. **Processing**: Show spinner, disable buttons, "Processing payment..."
3. **Success**: Green checkmark, auto-advance to ticket generation
4. **Failed**: Show error, enable "Retry Payment" button
5. **Timeout**: After 30s, show "Transaction taking longer than expected" with cancel option

**Error Handling**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš  Payment Failed                                            â”‚
â”‚                                                             â”‚
â”‚ Card declined: Insufficient funds                           â”‚
â”‚                                                             â”‚
â”‚ [Try Different Method]  [Retry Payment]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Void Payment** (within 2 minutes):
```
[âŸ² Void Last Payment] appears after successful payment
Confirmation: "Void payment of $235.40 via Card? This cannot be undone."
```

### 3. Quick Check-in Popover

**Purpose**: Fast check-in for pre-paid players directly from tee sheet.

**Trigger**: Hover/click on pre-paid player badge or quick action button.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quick Check-in                         â”‚
â”‚ John Smith                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Green Fee         $150.00   Pre-paid â”‚
â”‚ âœ“ Cart (shared)      $40.00   Pre-paid â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Total               $190.00   SETTLED  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Cancel]           [âœ“ Check In & Print]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Behavior**:
- Click outside closes popover
- Escape key closes popover
- Focus trapped within popover
- Auto-positions to avoid viewport overflow
- Success dismisses with brief "Checked in!" toast

### 4. Starter Ticket

**Display**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STARTER TICKET                           â”‚
â”‚                    ST-2026-0130-042                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Tee Time:     8:30 AM                                       â”‚
â”‚ Course:       Lake Course                                   â”‚
â”‚ Starting:     Hole 1                                        â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ PLAYERS                                                     â”‚
â”‚ 1. John Smith (M-1234)                                      â”‚
â”‚ 2. Jane Doe (Guest)                                         â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ Cart #:       C-15                                          â”‚
â”‚ Caddy:        Mike (Forecaddy)                              â”‚
â”‚                                                             â”‚
â”‚ Rentals:                                                    â”‚
â”‚ â€¢ Range finder                                              â”‚
â”‚ â€¢ Pull cart                                                 â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ Notes: Please repair divots                                 â”‚
â”‚                                                             â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚ [QR CODE]   â”‚                                  â”‚
â”‚            â”‚             â”‚                                  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                             â”‚
â”‚ Generated: 8:22 AM by Staff01                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Print Dialog**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Starter Ticket Generated                                [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ Ticket ST-2026-0130-042 ready                            â”‚
â”‚                                                             â”‚
â”‚ Print Options:                                              â”‚
â”‚ â—‹ Starter Ticket only                                       â”‚
â”‚ â—‹ Receipt only                                              â”‚
â”‚ â— Combined (Ticket + Receipt)                               â”‚
â”‚ â—‹ Don't print                                               â”‚
â”‚                                                             â”‚
â”‚ â–¡ Send receipt via email                                    â”‚
â”‚ â–¡ Send receipt via SMS                                      â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Preview]                                     [Print & Done]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Settings Configuration

### Golf â†’ Check-in Settings Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check-in Settings                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â–¼ Check-in Policy                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â–¡ Allow partial payment                                 â”‚ â”‚
â”‚ â”‚   Players can check in with partial balance paid        â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Block suspended members                               â”‚ â”‚
â”‚ â”‚   Prevent check-in for members with suspended status    â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Show suspension reason to staff                       â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Require all line items paid before check-in          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â–¼ Payment Methods                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Drag to reorder Â· Toggle to enable/disable              â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â‰¡ â˜‘ Cash                              [Edit] [Delete]   â”‚ â”‚
â”‚ â”‚ â‰¡ â˜‘ QR Transfer        Requires ref   [Edit] [Delete]   â”‚ â”‚
â”‚ â”‚ â‰¡ â˜‘ Card               Opens POS      [Edit] [Delete]   â”‚ â”‚
â”‚ â”‚ â‰¡ â˜‘ Member Account                    [Edit] [Delete]   â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [+ Add Payment Method]                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â–¼ Tax Configuration                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Default Tax Rate:  [7    ] %                            â”‚ â”‚
â”‚ â”‚ Default Tax Type:  [Include in price â–¼]                 â”‚ â”‚
â”‚ â”‚ Tax Label:         [VAT          ]                      â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Show tax breakdown on receipt                         â”‚ â”‚
â”‚ â”‚ â˜‘ Show tax type indicator (add/include)                 â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ Item Type Overrides:                                    â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚ â”‚ â”‚ Item Type â”‚ Rate   â”‚ Type        â”‚        â”‚          â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚ â”‚
â”‚ â”‚ â”‚ Green Fee â”‚ 7%     â”‚ Include     â”‚ [Edit] â”‚          â”‚ â”‚
â”‚ â”‚ â”‚ Cart      â”‚ 7%     â”‚ Add         â”‚ [Edit] â”‚          â”‚ â”‚
â”‚ â”‚ â”‚ Caddy     â”‚ 0%     â”‚ None        â”‚ [Edit] â”‚          â”‚ â”‚
â”‚ â”‚ â”‚ Rental    â”‚ 7%     â”‚ Add         â”‚ [Edit] â”‚          â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â–¼ Starter Ticket                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Generate ticket:   â—‹ On check-in  â— On settlement       â”‚ â”‚
â”‚ â”‚                    â—‹ Manual only                        â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Auto-generate when all players settled                â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ Default print:     [Combined (Ticket + Receipt) â–¼]      â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ Ticket Content:                                         â”‚ â”‚
â”‚ â”‚ â˜‘ Tee time         â˜‘ Course          â˜‘ Starting hole   â”‚ â”‚
â”‚ â”‚ â˜‘ Player names     â˜‘ Member numbers  â˜‘ Cart number     â”‚ â”‚
â”‚ â”‚ â˜‘ Caddy name       â˜‘ Rental items    â˜‘ Special requestsâ”‚ â”‚
â”‚ â”‚ â˜‘ QR code                                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â–¼ Pro Shop Integration                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ Allow adding Pro Shop items at check-in               â”‚ â”‚
â”‚ â”‚ â˜‘ Show quick-add items                                  â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ Quick Add Items (max 10):                               â”‚ â”‚
â”‚ â”‚ [Golf Balls Ã—]  [Gloves Ã—]  [Tees Ã—]  [Drinks Ã—]       â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [+ Select Products]                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â–¼ POS Integration                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Status: â— Connected to Square Terminal                  â”‚ â”‚
â”‚ â”‚ Terminal ID: SQ-TERM-001                                â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [Test Connection]  [Configure]  [Disconnect]            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Reset to Defaults]                              [Save]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Golf â†’ Pro Shop Settings Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pro Shop Products                        [+ Add Product]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ” Search products...          Category: [All â–¼]            â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ â–¡  Name              SKU        Category    Price   Tax  â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ â–¡  Pro V1 Balls      SKU-001    Equipment   $54.99  7%  â”‚â”‚
â”‚ â”‚ â–¡  Titleist Cap      SKU-002    Apparel     $32.00  7%  â”‚â”‚
â”‚ â”‚ â–¡  FootJoy Glove     SKU-003    Accessories $25.00  7%  â”‚â”‚
â”‚ â”‚ â–¡  Golf Tees (50)    SKU-004    Accessories  $5.00  7%  â”‚â”‚
â”‚ â”‚ â–¡  Bottled Water     SKU-005    Beverages    $4.00  0%  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚ Showing 5 of 142 products                    [1] [2] [3] â€º  â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Categories                               [+ Add Category]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â‰¡  Equipment        24 products   7% (Add)    [Edit] â‹® â”‚ â”‚
â”‚ â”‚ â‰¡  Apparel          38 products   7% (Add)    [Edit] â‹® â”‚ â”‚
â”‚ â”‚ â‰¡  Accessories      45 products   7% (Add)    [Edit] â‹® â”‚ â”‚
â”‚ â”‚ â‰¡  Beverages        18 products   0% (None)   [Edit] â‹® â”‚ â”‚
â”‚ â”‚ â‰¡  Food             17 products   7% (Include)[Edit] â‹® â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Add/Edit Product Modal**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Product                                             [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Product Name *        [                              ]      â”‚
â”‚ SKU                   [                              ]      â”‚
â”‚ Category *            [Select category           â–¼]        â”‚
â”‚ Description           [                              ]      â”‚
â”‚                                                             â”‚
â”‚ Price *               $ [         ]                         â”‚
â”‚                                                             â”‚
â”‚ Tax Settings                                                â”‚
â”‚ â—‹ Use category defaults (7%, Add)                           â”‚
â”‚ â— Custom tax settings                                       â”‚
â”‚   Tax Rate:  [7    ] %                                      â”‚
â”‚   Tax Type:  [Add on top â–¼]                                 â”‚
â”‚                                                             â”‚
â”‚ Variants (optional)                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Size M              SKU-003-M           +$0.00    [Ã—]   â”‚ â”‚
â”‚ â”‚ Size L              SKU-003-L           +$0.00    [Ã—]   â”‚ â”‚
â”‚ â”‚ Size XL             SKU-003-XL          +$2.00    [Ã—]   â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [+ Add Variant]                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â˜‘ Active (available for sale)                               â”‚
â”‚ â–¡ Show in Quick Add                                         â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         [Cancel]    [Save]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Add/Edit Category Modal**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Category                                            [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Category Name *       [                              ]      â”‚
â”‚ Description           [                              ]      â”‚
â”‚                                                             â”‚
â”‚ Default Tax Settings                                        â”‚
â”‚ Tax Rate:  [7    ] %                                        â”‚
â”‚ Tax Type:  [Add on top â–¼]                                   â”‚
â”‚                                                             â”‚
â”‚ â˜‘ Active                                                    â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         [Cancel]    [Save]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Delete Category Confirmation**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Delete Category?                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âš  This will affect 24 products in the "Equipment" category.â”‚
â”‚                                                             â”‚
â”‚ Products will be moved to:  [Uncategorized â–¼]              â”‚
â”‚                                                             â”‚
â”‚ This action cannot be undone.                               â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [Cancel]    [Delete Category]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## UX Requirements

### High Priority (Must Have)

1. **Suspended Member Blocking**
   - Disable check-in for suspended members
   - Show clear warning with suspension reason (if enabled)
   - Provide "View Details" link to member profile

2. **Payment Error Handling**
   - Display clear error message with reason
   - Offer "Retry Payment" button
   - Allow switching to different payment method
   - Log failed attempts for audit

3. **Form Validation**
   - Tax rate: min 0, max 100
   - Required fields: name, price, category
   - SKU uniqueness check (real-time)
   - Price must be positive number

4. **Unsaved Changes Detection**
   - Track form dirty state
   - Show confirmation dialog on navigation
   - "You have unsaved changes. Discard?"

5. **Category Delete Impact Warning**
   - Show product count affected
   - Require target category selection
   - Confirm before proceeding

### Medium Priority (Should Have)

1. **Loading States**
   - Skeleton loaders for player cards
   - Loading spinner during payment
   - Disabled buttons during async operations

2. **Keyboard Navigation**
   - Tab order follows visual hierarchy
   - Space to toggle checkboxes
   - Enter to submit forms
   - Escape to close modals/popovers

3. **Focus Management**
   - Focus trap in modals
   - Return focus on close
   - Auto-focus first interactive element

4. **Popover Positioning**
   - Boundary detection
   - Flip placement when near edge
   - Maintain visibility in viewport

5. **Accessibility**
   - ARIA labels on all buttons
   - Screen reader announcements
   - Focus visible states (`focus:ring-2`)
   - Color contrast compliance

### Lower Priority (Nice to Have)

1. **Print Preview**
   - Preview starter ticket before printing
   - Show receipt preview

2. **Receipt Options**
   - Email receipt option
   - SMS receipt option

3. **Bulk Product Actions**
   - Multi-select products
   - Bulk activate/deactivate
   - Bulk category change

4. **Category Ordering**
   - Drag-to-reorder categories
   - Persist sort order

5. **Search Debounce**
   - 300ms debounce on product search
   - Prevent excessive filtering

---

## Implementation Phases

### Phase 1: Core Check-in Flow âœ… API COMPLETE
- [x] Individual player check-in mutations
- [x] Basic settlement processing
- [x] Payment method CRUD
- [x] Check-in status updates

### Phase 2: Tax & Line Items âœ… API COMPLETE
- [x] Per-item tax calculation (TaxCalculatorService)
- [x] Tax configuration in ClubGolfSettings
- [x] Line item add/remove mutations
- [x] Receipt HTML generation

### Phase 3: Pro Shop API âœ… API COMPLETE
- [x] Product management CRUD
- [x] Category management CRUD
- [x] Variant support
- [x] Quick add product configuration

### Phase 4: Starter Ticket âœ… API COMPLETE
- [x] Ticket generation with denormalized data
- [x] HTML template generation
- [x] QR code validation
- [x] Reprint tracking

### Phase 5: Batch Operations & Reports âœ… API COMPLETE
- [x] Check in all players mutation
- [x] Settle all players mutation
- [x] Check-in audit history
- [x] Daily check-in report

### Phase 6: UI Implementation ğŸŸ¡ IN PROGRESS
- [x] Wire GraphQL operations to api-client
- [x] Create new FlightCheckInPanel component
- [x] Create new SettlementPanel component
- [x] Create LineItemManager component
- [x] Create StarterTicketPreview component
- [x] Create CheckInStatusBadge component
- [x] Create ProShopItemPicker component
- [x] Integrate FlightCheckInPanel into golf page
- [ ] Test end-to-end check-in flow
- [ ] Clean up old CheckInModal component
- [ ] Replace old CheckInModal
- [ ] Replace old SettlementModal
- [ ] Update tee sheet integration

---

## GraphQL API (Implemented)

### Queries
| Query | Description | Status |
|-------|-------------|--------|
| `flightCheckInInfo(teeTimeId)` | Get check-in info for all players in a tee time | âœ… |
| `playerPaymentInfo(playerId)` | Get detailed payment info for a single player | âœ… |
| `flightPaymentSummary(teeTimeId)` | Get payment summary for a flight | âœ… |
| `starterTicket(ticketId)` | Get starter ticket by ID | âœ… |
| `starterTicketByTeeTime(teeTimeId)` | Get starter ticket for a tee time | âœ… |
| `ticketHTML(teeTimeId)` | Get HTML template for starter ticket | âœ… |
| `receiptHTML(teeTimeId, playerId)` | Get HTML template for receipt | âœ… |
| `validateTicket(qrCodeData)` | Validate ticket by QR code | âœ… |
| `checkInHistory(filter)` | Get check-in audit history | âœ… |
| `dailyCheckInReport(input)` | Get daily check-in report | âœ… |
| `checkInPaymentMethods` | Get all payment methods | âœ… |
| `golfCheckInSettings` | Get complete check-in settings | âœ… |
| `proShopCategories` | Get pro shop categories | âœ… |
| `proShopProducts(filter)` | Get pro shop products | âœ… |

### Mutations
| Mutation | Description | Status |
|----------|-------------|--------|
| `addLineItem(input)` | Add a line item to a player | âœ… |
| `removeLineItem(input)` | Remove an unpaid line item | âœ… |
| `processSettlement(input)` | Process payment settlement | âœ… |
| `checkInFlight(input)` | Check in multiple players | âœ… |
| `checkInAllPlayers(input)` | Check in all players in flight | âœ… |
| `settleAllPlayers(input)` | Settle all players in flight | âœ… |
| `undoCheckIn(input)` | Undo a player check-in | âœ… |
| `generateStarterTicket(input)` | Generate/regenerate starter ticket | âœ… |
| `printStarterTicket(input)` | Mark ticket as printed | âœ… |
| `createCheckInPaymentMethod(input)` | Create payment method | âœ… |
| `updateCheckInPaymentMethod(input)` | Update payment method | âœ… |
| `deleteCheckInPaymentMethod(id)` | Delete payment method | âœ… |
| `updateCheckInPolicy(input)` | Update check-in policy | âœ… |
| `createProShopCategory(input)` | Create category | âœ… |
| `updateProShopCategory(input)` | Update category | âœ… |
| `deleteProShopCategory(id)` | Delete category | âœ… |
| `createProShopProduct(input)` | Create product | âœ… |
| `updateProShopProduct(input)` | Update product | âœ… |
| `deleteProShopProduct(id)` | Delete product | âœ… |

---

## UI Implementation Tasks

### Task 1: Add GraphQL Operations to API Client âœ… COMPLETE

**File**: `packages/api-client/src/operations/golf.graphql`

**Status**: Completed - All GraphQL operations added and codegen successful.

Add the following operations:

```graphql
# Check-in Queries
query GetFlightCheckInInfo($teeTimeId: ID!) {
  flightCheckInInfo(teeTimeId: $teeTimeId) {
    id
    teeTime
    course
    startingHole
    cartNumber
    caddyAssignment
    players {
      id
      name
      type
      memberId
      paymentStatus
      checkedIn
      checkedInAt
      lineItems {
        id
        type
        description
        baseAmount
        taxType
        taxRate
        taxAmount
        totalAmount
        isPaid
        paidAt
        paidVia
      }
      subtotal
      totalTax
      grandTotal
      paidAmount
      balanceDue
    }
  }
}

query GetFlightPaymentSummary($teeTimeId: ID!) {
  flightPaymentSummary(teeTimeId: $teeTimeId) {
    totalPlayers
    checkedInCount
    fullyPaidCount
    partiallyPaidCount
    unpaidCount
    totalAmount
    paidAmount
    balanceDue
  }
}

query GetStarterTicket($teeTimeId: ID!) {
  starterTicketByTeeTime(teeTimeId: $teeTimeId) {
    id
    ticketNumber
    teeTime
    course
    startingHole
    players
    cartNumber
    caddyName
    rentalItems
    specialRequests
    qrCodeData
    generatedAt
    printedAt
    reprintCount
  }
}

query GetTicketHTML($teeTimeId: ID!) {
  ticketHTML(teeTimeId: $teeTimeId)
}

query GetReceiptHTML($teeTimeId: ID!, $playerId: ID!) {
  receiptHTML(teeTimeId: $teeTimeId, playerId: $playerId)
}

query GetCheckInPaymentMethods {
  checkInPaymentMethods {
    id
    name
    type
    icon
    isEnabled
    requiresReference
    sortOrder
  }
}

# Check-in Mutations
mutation AddLineItem($input: AddLineItemInput!) {
  addLineItem(input: $input) {
    id
    type
    description
    baseAmount
    taxAmount
    totalAmount
    isPaid
  }
}

mutation RemoveLineItem($input: RemoveLineItemInput!) {
  removeLineItem(input: $input)
}

mutation ProcessSettlement($input: ProcessSettlementInput!) {
  processSettlement(input: $input) {
    success
    transactionId
    settledAt
    settledBy
    error
    players {
      playerId
      amount
      success
    }
  }
}

mutation CheckInFlight($input: CheckInFlightInput!) {
  checkInFlight(input: $input) {
    success
    checkedInAt
    checkedInBy
    ticketId
    ticketNumber
    players {
      playerId
      success
      error
    }
  }
}

mutation CheckInAllPlayers($input: CheckInAllPlayersInput!) {
  checkInAllPlayers(input: $input) {
    success
    checkedInAt
    checkedInBy
    ticketId
    ticketNumber
    players {
      playerId
      success
      error
    }
  }
}

mutation SettleAllPlayers($input: SettleAllPlayersInput!) {
  settleAllPlayers(input: $input) {
    success
    transactionId
    settledAt
    settledBy
    error
    players {
      playerId
      amount
      success
    }
  }
}

mutation UndoCheckIn($input: UndoCheckInInput!) {
  undoCheckIn(input: $input)
}

mutation GenerateStarterTicket($input: GenerateTicketInput!) {
  generateStarterTicket(input: $input) {
    id
    ticketNumber
    generatedAt
  }
}
```

**After adding, run**: `pnpm --filter @clubvantage/api-client codegen`

---

### Task 2: Create New UI Components (Detailed Breakdown)

---

#### 2.1 FlightCheckInPanel (Slide-over Panel)

**File**: `apps/application/src/components/golf/flight-checkin-panel.tsx`

**Type**: Slide-over panel (right side, 600px width)

**Props**:
```typescript
interface FlightCheckInPanelProps {
  teeTimeId: string;
  onClose: () => void;
  onCheckInComplete?: () => void;
}
```

**State**:
```typescript
const [selectedPlayers, setSelectedPlayers] = useState<Set<string>>(new Set());
const [currentView, setCurrentView] = useState<'select' | 'settle' | 'ticket'>('select');
const [cartNumber, setCartNumber] = useState('');
const [notes, setNotes] = useState('');
```

**Data Fetching**:
```typescript
const { data: flightInfo, isLoading } = useGetFlightCheckInInfoQuery({ teeTimeId });
const { data: paymentMethods } = useGetCheckInPaymentMethodsQuery();
```

##### Panel Header
| Element | Type | Action |
|---------|------|--------|
| Title | Text | "Check In - {time}" |
| Close button | IconButton | `onClose()` |
| Flight info | Text | "{course} Â· Hole {startingHole}" |

##### View 1: Player Selection (`currentView === 'select'`)

**Player Card (repeated for each player)**:
| Element | Type | Action |
|---------|------|--------|
| Checkbox | Checkbox | Toggle player in `selectedPlayers` |
| Player name | Text | Display name |
| Player type badge | Badge | M/G/D/W indicator |
| Payment status badge | CheckInStatusBadge | Show pre-paid/unpaid/partial |
| Line items summary | Text | "Green Fee: $150 Â· Cart: $40" |
| Expand button | IconButton | Toggle line item details |
| "View Details" link | Link | Opens player detail (optional) |

**Suspended Player Warning** (conditional):
| Element | Type | Action |
|---------|------|--------|
| Warning banner | Alert | Red background |
| Suspension reason | Text | "{name} is suspended: {reason}" |
| "View Member" link | Link | Navigate to member profile |

**Cart Assignment Section**:
| Element | Type | Action |
|---------|------|--------|
| Cart number input | TextInput | Set `cartNumber` |
| Label | Text | "Cart Number (optional)" |

**Notes Section**:
| Element | Type | Action |
|---------|------|--------|
| Notes textarea | Textarea | Set `notes` |
| Label | Text | "Check-in Notes (optional)" |

**Footer Actions**:
| Element | Type | Action | Condition |
|---------|------|--------|-----------|
| "Select All" button | Button/ghost | Toggle all non-checked-in players | Always |
| Summary text | Text | "Selected: {n} players Â· Due: ${amount}" | Always |
| "Cancel" button | Button/outline | `onClose()` | Always |
| "Proceed to Settlement" button | Button/primary | `setCurrentView('settle')` | `selectedPlayers.size > 0 && totalDue > 0` |
| "Check In (Pre-paid)" button | Button/primary | Call `checkInFlight` mutation | `selectedPlayers.size > 0 && totalDue === 0` |

##### View 2: Settlement (`currentView === 'settle'`)
â†’ Renders `<SettlementPanel>` component (see 2.2)

##### View 3: Ticket (`currentView === 'ticket'`)
â†’ Renders `<StarterTicketPreview>` component (see 2.5)

---

#### 2.2 SettlementPanel (Embedded Panel)

**File**: `apps/application/src/components/golf/settlement-panel.tsx`

**Type**: Panel content (embedded in FlightCheckInPanel)

**Props**:
```typescript
interface SettlementPanelProps {
  teeTimeId: string;
  playerIds: string[];
  onBack: () => void;
  onComplete: (ticketId?: string) => void;
}
```

**State**:
```typescript
const [settlementMode, setSettlementMode] = useState<'individual' | 'group' | 'split'>('individual');
const [selectedPayerId, setSelectedPayerId] = useState<string | null>(null);
const [selectedPaymentMethodId, setSelectedPaymentMethodId] = useState<string | null>(null);
const [reference, setReference] = useState('');
const [playerPayments, setPlayerPayments] = useState<Map<string, number>>(new Map());
const [processingPlayerId, setProcessingPlayerId] = useState<string | null>(null);
const [settledPlayers, setSettledPlayers] = useState<Set<string>>(new Set());
```

##### Settlement Mode Selector
| Element | Type | Action |
|---------|------|--------|
| "Individual" button | ToggleButton | `setSettlementMode('individual')` |
| "Group" button | ToggleButton | `setSettlementMode('group')` |
| "Split" button | ToggleButton (disabled) | Coming soon tooltip |

##### Player Payment Cards (Individual Mode)

**For each player**:
| Element | Type | Action |
|---------|------|--------|
| Player name | Text | Display |
| Player type badge | Badge | M/G/D/W |
| Line items list | LineItemManager | See 2.3 |
| "+ Add Item" button | Button/ghost | Opens ProShopItemPicker dialog |
| Subtotal | Text | Sum of base amounts |
| Tax | Text | Sum of tax amounts |
| Total | Text | Grand total |
| Status badge | Badge | "SETTLED" (green) or "DUE" (amber) |
| "Settle ${amount}" button | Button/primary | Process individual settlement |

**Individual Settle Action**:
```typescript
const handleSettlePlayer = async (playerId: string) => {
  setProcessingPlayerId(playerId);
  await processSettlement({
    teeTimeId,
    payments: [{ playerId, amount: playerBalance }],
    paymentMethodId: selectedPaymentMethodId,
    reference,
  });
  setSettledPlayers(prev => new Set([...prev, playerId]));
  setProcessingPlayerId(null);
};
```

##### Group Payment Section (Group Mode)

| Element | Type | Action |
|---------|------|--------|
| "Select Payer" dropdown | Select | `setSelectedPayerId(value)` |
| Total amount | Text | Combined total for all players |
| "Settle All ${amount}" button | Button/primary | Process group settlement |

**Group Settle Action**:
```typescript
const handleSettleGroup = async () => {
  await settleAllPlayers({
    teeTimeId,
    paymentMethodId: selectedPaymentMethodId,
    reference,
  });
  onComplete();
};
```

##### Payment Method Section

| Element | Type | Action |
|---------|------|--------|
| Payment method buttons | RadioGroup | `setSelectedPaymentMethodId(id)` |
| Cash icon + label | Button | Select cash method |
| Transfer icon + label | Button | Select transfer method |
| Card icon + label | Button | Select card method |
| Member Account icon + label | Button | Select account method |

**Reference Input** (conditional: when method `requiresReference`):
| Element | Type | Action |
|---------|------|--------|
| Reference input | TextInput | `setReference(value)` |
| Label | Text | "Reference Number" |
| Helper text | Text | "Enter transaction reference" |

##### Footer Actions

| Element | Type | Action | Condition |
|---------|------|--------|-----------|
| "Back" button | Button/ghost | `onBack()` | Always |
| Balance summary | Text | "Balance Due: ${remaining}" | Always |
| "Complete & Print Ticket" button | Button/primary | Generate ticket + complete | All players settled |

---

#### 2.3 LineItemManager (Embedded Component)

**File**: `apps/application/src/components/golf/line-item-manager.tsx`

**Type**: Inline list component

**Props**:
```typescript
interface LineItemManagerProps {
  playerId: string;
  lineItems: BookingLineItem[];
  readonly?: boolean;
  onAddItem?: () => void;
  onRemoveItem?: (lineItemId: string) => void;
}
```

##### Line Item Row (repeated)

| Element | Type | Action |
|---------|------|--------|
| Item type icon | Icon | Green fee / Cart / Caddy / Rental / Product |
| Description | Text | Line item description |
| Base amount | Text | "${baseAmount}" |
| Tax indicator | Badge/small | "(+7% VAT)" or "(incl.)" or empty |
| Total amount | Text | "${totalAmount}" |
| Status icon | Icon | âœ“ Paid (green) or â—‹ Unpaid (gray) |
| Remove button | IconButton/X | `onRemoveItem(id)` | Only if `!isPaid && !readonly` |

##### Tax Summary Row

| Element | Type | Action |
|---------|------|--------|
| "Subtotal" label | Text | |
| Subtotal amount | Text | Sum of baseAmount |
| "Tax" label | Text | |
| Tax amount | Text | Sum of taxAmount |
| Divider | HR | |
| "Total" label | Text/bold | |
| Total amount | Text/bold | Sum of totalAmount |

##### Add Item Button (conditional)

| Element | Type | Action | Condition |
|---------|------|--------|-----------|
| "+ Add Pro Shop Item" | Button/ghost | `onAddItem()` | `!readonly` |

---

#### 2.4 ProShopItemPicker (Dialog)

**File**: `apps/application/src/components/golf/proshop-item-picker.tsx`

**Type**: Modal dialog (500px width)

**Props**:
```typescript
interface ProShopItemPickerProps {
  isOpen: boolean;
  onClose: () => void;
  onSelectItem: (item: { productId: string; variantId?: string; quantity: number }) => void;
  playerId: string;
}
```

**State**:
```typescript
const [searchQuery, setSearchQuery] = useState('');
const [selectedCategoryId, setSelectedCategoryId] = useState<string | null>(null);
const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);
const [selectedVariantId, setSelectedVariantId] = useState<string | null>(null);
const [quantity, setQuantity] = useState(1);
```

**Data Fetching**:
```typescript
const { data: categories } = useGetProShopCategoriesQuery();
const { data: products } = useGetProShopProductsQuery({
  categoryId: selectedCategoryId,
  search: searchQuery,
  isActive: true,
});
const { data: settings } = useGetGolfCheckInSettingsQuery();
const quickAddProductIds = settings?.proShop?.quickAddProductIds || [];
```

##### Dialog Header

| Element | Type | Action |
|---------|------|--------|
| Title | Text | "Add Pro Shop Item" |
| Close button | IconButton | `onClose()` |

##### Search Section

| Element | Type | Action |
|---------|------|--------|
| Search input | TextInput | `setSearchQuery(value)` with 300ms debounce |
| Search icon | Icon | Decorative |
| Clear button | IconButton | `setSearchQuery('')` | When has value |

##### Quick Add Section (conditional: when `quickAddProductIds.length > 0`)

| Element | Type | Action |
|---------|------|--------|
| Section label | Text | "Quick Add" |
| Quick add buttons | Button[] | `onSelectItem({ productId, quantity: 1 })` |
| Button content | Text | "{name} ${price}" |

##### Category Tabs

| Element | Type | Action |
|---------|------|--------|
| "All" tab | Tab | `setSelectedCategoryId(null)` |
| Category tabs | Tab[] | `setSelectedCategoryId(id)` |

##### Product List

**Product Row (repeated)**:
| Element | Type | Action |
|---------|------|--------|
| Product name | Text | |
| SKU | Text/muted | |
| Price | Text | "${price}" |
| "+" button | IconButton | `setSelectedProduct(product)` |

##### Variant Selection (conditional: when `selectedProduct?.variants?.length > 0`)

| Element | Type | Action |
|---------|------|--------|
| "Select Variant" label | Text | |
| Variant buttons | RadioGroup | `setSelectedVariantId(id)` |
| Variant name | Text | "{name}" |
| Price adjustment | Text | "+${adjustment}" or included |

##### Quantity Section (conditional: when `selectedProduct`)

| Element | Type | Action |
|---------|------|--------|
| "Quantity" label | Text | |
| Decrement button | IconButton | `setQuantity(q => Math.max(1, q - 1))` |
| Quantity display | Text | "{quantity}" |
| Increment button | IconButton | `setQuantity(q => q + 1)` |

##### Dialog Footer

| Element | Type | Action | Condition |
|---------|------|--------|-----------|
| "Cancel" button | Button/outline | `onClose()` | Always |
| "Add to Bill" button | Button/primary | Submit and close | `selectedProduct !== null` |

**Add to Bill Action**:
```typescript
const handleAdd = () => {
  onSelectItem({
    productId: selectedProduct.id,
    variantId: selectedVariantId,
    quantity,
  });
  onClose();
};
```

---

#### 2.5 StarterTicketPreview (Embedded Panel)

**File**: `apps/application/src/components/golf/starter-ticket-preview.tsx`

**Type**: Panel content with iframe

**Props**:
```typescript
interface StarterTicketPreviewProps {
  teeTimeId: string;
  ticketId?: string;
  onClose: () => void;
  onPrintComplete?: () => void;
}
```

**State**:
```typescript
const [printOption, setPrintOption] = useState<'ticket' | 'receipt' | 'combined' | 'none'>('combined');
const [sendEmail, setSendEmail] = useState(false);
const [sendSMS, setSendSMS] = useState(false);
const [isPrinting, setIsPrinting] = useState(false);
```

**Data Fetching**:
```typescript
const { data: ticket } = useGetStarterTicketQuery({ teeTimeId });
const { data: ticketHTML } = useGetTicketHTMLQuery({ teeTimeId });
```

##### Success Header

| Element | Type | Action |
|---------|------|--------|
| Success icon | Icon/check | Green checkmark |
| Title | Text | "Check-in Complete!" |
| Ticket number | Text | "Ticket #{ticketNumber}" |

##### Ticket Preview

| Element | Type | Action |
|---------|------|--------|
| Preview iframe | iframe | Render ticketHTML |
| Zoom controls | IconButtons | Scale preview |

##### Print Options

| Element | Type | Action |
|---------|------|--------|
| "Starter Ticket only" | Radio | `setPrintOption('ticket')` |
| "Receipt only" | Radio | `setPrintOption('receipt')` |
| "Combined (Ticket + Receipt)" | Radio | `setPrintOption('combined')` |
| "Don't print" | Radio | `setPrintOption('none')` |

##### Digital Options

| Element | Type | Action |
|---------|------|--------|
| "Send receipt via email" | Checkbox | `setSendEmail(!sendEmail)` |
| "Send receipt via SMS" | Checkbox | `setSendSMS(!sendSMS)` |

##### Footer Actions

| Element | Type | Action |
|---------|------|--------|
| "Preview" button | Button/outline | Open print preview in new tab |
| "Print & Done" button | Button/primary | Trigger print + `onClose()` |

**Print Action**:
```typescript
const handlePrint = async () => {
  setIsPrinting(true);
  if (printOption !== 'none') {
    // Open print dialog
    const printWindow = window.open('', '_blank');
    printWindow.document.write(ticketHTML);
    printWindow.print();
  }
  if (sendEmail) {
    // Call email API
  }
  if (sendSMS) {
    // Call SMS API
  }
  await printStarterTicket({ ticketId: ticket.id });
  setIsPrinting(false);
  onPrintComplete?.();
  onClose();
};
```

---

#### 2.6 CheckInStatusBadge (Atomic Component)

**File**: `apps/application/src/components/golf/checkin-status-badge.tsx`

**Type**: Badge component

**Props**:
```typescript
interface CheckInStatusBadgeProps {
  status: 'pre-paid' | 'partial' | 'unpaid' | 'settled' | 'checked-in' | 'suspended';
  size?: 'sm' | 'md';
  showIcon?: boolean;
}
```

##### Variants

| Status | Background | Text | Icon |
|--------|------------|------|------|
| `pre-paid` | `bg-emerald-100` | `text-emerald-700` | âœ“ Check |
| `partial` | `bg-amber-100` | `text-amber-700` | â— Half circle |
| `unpaid` | `bg-red-100` | `text-red-700` | â—‹ Empty circle |
| `settled` | `bg-emerald-500` | `text-white` | âœ“ Check |
| `checked-in` | `bg-blue-500` | `text-white` | âœ“ Check |
| `suspended` | `bg-red-500` | `text-white` | âš  Warning |

---

#### 2.7 ConfirmDialog (Reusable Dialog)

**File**: `apps/application/src/components/golf/confirm-dialog.tsx`

**Type**: Modal dialog

**Props**:
```typescript
interface ConfirmDialogProps {
  isOpen: boolean;
  onClose: () => void;
  onConfirm: () => void;
  title: string;
  message: string;
  confirmLabel?: string;
  cancelLabel?: string;
  variant?: 'danger' | 'warning' | 'info';
  isLoading?: boolean;
}
```

##### Usage Scenarios

**Undo Check-in Confirmation**:
```typescript
<ConfirmDialog
  isOpen={showUndoConfirm}
  onClose={() => setShowUndoConfirm(false)}
  onConfirm={handleUndoCheckIn}
  title="Undo Check-in?"
  message="This will reverse the check-in for {playerName}. Any starter ticket will be invalidated."
  confirmLabel="Undo Check-in"
  variant="warning"
/>
```

**Void Payment Confirmation**:
```typescript
<ConfirmDialog
  isOpen={showVoidConfirm}
  onClose={() => setShowVoidConfirm(false)}
  onConfirm={handleVoidPayment}
  title="Void Payment?"
  message="Void payment of ${amount} via {method}? This cannot be undone."
  confirmLabel="Void Payment"
  variant="danger"
/>
```

**Remove Line Item Confirmation**:
```typescript
<ConfirmDialog
  isOpen={showRemoveConfirm}
  onClose={() => setShowRemoveConfirm(false)}
  onConfirm={() => handleRemoveItem(itemId)}
  title="Remove Item?"
  message="Remove {itemDescription} (${amount}) from the bill?"
  confirmLabel="Remove"
  variant="warning"
/>
```

---

#### 2.8 PaymentErrorBanner (Inline Component)

**File**: `apps/application/src/components/golf/payment-error-banner.tsx`

**Type**: Alert banner

**Props**:
```typescript
interface PaymentErrorBannerProps {
  error: string;
  onRetry?: () => void;
  onChangeMethod?: () => void;
  onDismiss?: () => void;
}
```

##### Layout

| Element | Type | Action |
|---------|------|--------|
| Error icon | Icon | âš  Warning (red) |
| Error message | Text | "{error}" |
| "Retry Payment" button | Button/small | `onRetry()` |
| "Try Different Method" button | Button/small/outline | `onChangeMethod()` |
| Dismiss button | IconButton/X | `onDismiss()` |

---

### Component Dependency Tree

```
FlightCheckInPanel
â”œâ”€â”€ CheckInStatusBadge
â”œâ”€â”€ SettlementPanel
â”‚   â”œâ”€â”€ LineItemManager
â”‚   â”‚   â””â”€â”€ CheckInStatusBadge
â”‚   â”œâ”€â”€ ProShopItemPicker (dialog)
â”‚   â”œâ”€â”€ PaymentErrorBanner
â”‚   â””â”€â”€ ConfirmDialog (void payment)
â”œâ”€â”€ StarterTicketPreview
â””â”€â”€ ConfirmDialog (undo check-in)
```

---

### Page Actions Summary

| Action | Trigger | API Call | Success Behavior |
|--------|---------|----------|------------------|
| Open check-in panel | Click flight row / "Check In" button | `flightCheckInInfo` query | Show panel |
| Select/deselect player | Click checkbox | None (local state) | Update selection |
| Select all players | Click "Select All" | None (local state) | Select all non-checked-in |
| Add line item | Click "+ Add Item" â†’ select product | `addLineItem` mutation | Refresh line items |
| Remove line item | Click X on line item â†’ confirm | `removeLineItem` mutation | Refresh line items |
| Process individual settlement | Click "Settle ${amount}" | `processSettlement` mutation | Mark player settled |
| Process group settlement | Click "Settle All" | `settleAllPlayers` mutation | Mark all settled |
| Check in pre-paid players | Click "Check In" | `checkInFlight` mutation | Show ticket view |
| Check in after settlement | All settled â†’ auto | `checkInFlight` mutation | Show ticket view |
| Generate ticket | Auto after check-in | `generateStarterTicket` mutation | Show ticket preview |
| Print ticket | Click "Print & Done" | `printStarterTicket` mutation | Close panel |
| Undo check-in | Click "Undo" â†’ confirm | `undoCheckIn` mutation | Reset player status |
| Close panel | Click X / backdrop | None | Close panel |

---

### Task 3: Update Hooks

**File**: `apps/application/src/hooks/use-golf.ts`

Add new hooks wrapping the generated mutations:

```typescript
// Add to imports
import {
  useGetFlightCheckInInfoQuery,
  useGetFlightPaymentSummaryQuery,
  useGetCheckInPaymentMethodsQuery,
  useAddLineItemMutation,
  useRemoveLineItemMutation,
  useProcessSettlementMutation,
  useCheckInFlightMutation,
  useCheckInAllPlayersMutation,
  useSettleAllPlayersMutation,
  useUndoCheckInMutation,
  useGenerateStarterTicketMutation,
} from '@clubvantage/api-client';

// Add to useGolfMutations
export function useCheckInMutations() {
  const queryClient = useQueryClient();

  const addLineItem = useAddLineItemMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
    },
  });

  const removeLineItem = useRemoveLineItemMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
    },
  });

  const processSettlement = useProcessSettlementMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
      queryClient.invalidateQueries({ queryKey: ['GetTeeSheet'] });
    },
  });

  const checkInFlight = useCheckInFlightMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
      queryClient.invalidateQueries({ queryKey: ['GetTeeSheet'] });
    },
  });

  const checkInAllPlayers = useCheckInAllPlayersMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
      queryClient.invalidateQueries({ queryKey: ['GetTeeSheet'] });
    },
  });

  const settleAllPlayers = useSettleAllPlayersMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
      queryClient.invalidateQueries({ queryKey: ['GetTeeSheet'] });
    },
  });

  const undoCheckIn = useUndoCheckInMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetFlightCheckInInfo'] });
      queryClient.invalidateQueries({ queryKey: ['GetTeeSheet'] });
    },
  });

  const generateTicket = useGenerateStarterTicketMutation({
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['GetStarterTicket'] });
    },
  });

  return {
    addLineItem: useCallback((input) => addLineItem.mutateAsync({ input }), [addLineItem]),
    removeLineItem: useCallback((lineItemId) => removeLineItem.mutateAsync({ input: { lineItemId } }), [removeLineItem]),
    processSettlement: useCallback((input) => processSettlement.mutateAsync({ input }), [processSettlement]),
    checkInFlight: useCallback((input) => checkInFlight.mutateAsync({ input }), [checkInFlight]),
    checkInAllPlayers: useCallback((input) => checkInAllPlayers.mutateAsync({ input }), [checkInAllPlayers]),
    settleAllPlayers: useCallback((input) => settleAllPlayers.mutateAsync({ input }), [settleAllPlayers]),
    undoCheckIn: useCallback((input) => undoCheckIn.mutateAsync({ input }), [undoCheckIn]),
    generateTicket: useCallback((input) => generateTicket.mutateAsync({ input }), [generateTicket]),
    isProcessing: addLineItem.isPending || removeLineItem.isPending || processSettlement.isPending ||
                  checkInFlight.isPending || checkInAllPlayers.isPending || settleAllPlayers.isPending,
  };
}
```

---

### Task 4: Replace Old Modals in Tee Sheet

**File**: `apps/application/src/app/(dashboard)/golf/page.tsx`

1. Remove imports for old `CheckInModal` and `SettlementModal`
2. Import new `FlightCheckInPanel`
3. Update modal state to use slide-over panel pattern
4. Connect to new hooks

**Changes**:
```typescript
// Remove
import { DynamicCheckInModal as CheckInModal } from '@/components/golf/dynamic-modals'
import { DynamicSettlementModal as SettlementModal } from '@/components/golf/dynamic-modals'

// Add
import { FlightCheckInPanel } from '@/components/golf/flight-checkin-panel'

// Update state
const [checkInPanelOpen, setCheckInPanelOpen] = useState(false)
const [selectedTeeTimeId, setSelectedTeeTimeId] = useState<string | null>(null)

// Update handler
const handleOpenCheckIn = (teeTimeId: string) => {
  setSelectedTeeTimeId(teeTimeId)
  setCheckInPanelOpen(true)
}

// Replace modal render
{checkInPanelOpen && selectedTeeTimeId && (
  <FlightCheckInPanel
    teeTimeId={selectedTeeTimeId}
    onClose={() => {
      setCheckInPanelOpen(false)
      setSelectedTeeTimeId(null)
    }}
  />
)}
```

---

### Task 5: Delete Old Components

After new components are working, delete:
- `apps/application/src/components/golf/check-in-modal.tsx`
- `apps/application/src/components/golf/settlement-modal.tsx`
- Update `apps/application/src/components/golf/dynamic-modals.tsx` to remove old exports

---

## Files to Create/Modify Summary

| Action | File | Description |
|--------|------|-------------|
| MODIFY | `packages/api-client/src/operations/golf.graphql` | Add check-in GraphQL operations |
| RUN | `pnpm --filter @clubvantage/api-client codegen` | Regenerate types |
| CREATE | `apps/application/src/components/golf/flight-checkin-panel.tsx` | Main check-in panel |
| CREATE | `apps/application/src/components/golf/settlement-panel.tsx` | Settlement panel |
| CREATE | `apps/application/src/components/golf/line-item-manager.tsx` | Line item display/edit |
| CREATE | `apps/application/src/components/golf/proshop-item-picker.tsx` | Pro shop item selector |
| CREATE | `apps/application/src/components/golf/starter-ticket-preview.tsx` | Ticket preview/print |
| CREATE | `apps/application/src/components/golf/checkin-status-badge.tsx` | Status badges |
| MODIFY | `apps/application/src/hooks/use-golf.ts` | Add useCheckInMutations hook |
| MODIFY | `apps/application/src/app/(dashboard)/golf/page.tsx` | Integrate new components |
| DELETE | `apps/application/src/components/golf/check-in-modal.tsx` | Remove old modal |
| DELETE | `apps/application/src/components/golf/settlement-modal.tsx` | Remove old modal |
| MODIFY | `apps/application/src/components/golf/dynamic-modals.tsx` | Remove old exports |

---

## Design System Reference

### Colors (from CLAUDE.md)
| Element | Class |
|---------|-------|
| Pre-paid badge | `bg-emerald-100 text-emerald-700` |
| Pay at desk badge | `bg-amber-100 text-amber-700` |
| Settled status | `bg-emerald-500 text-white` |
| Due status | `bg-amber-500 text-white` |
| Error state | `bg-red-50 border-red-200 text-red-700` |
| Primary button | `bg-amber-500 hover:bg-amber-600 text-white` |
| Secondary button | `bg-stone-100 hover:bg-stone-200 text-stone-700` |

### Component Patterns
- Modal: Header with title + close, body with content, footer with actions
- Cards: `bg-white rounded-xl shadow-lg shadow-stone-200/30`
- Inputs: `rounded-lg border-stone-200 focus:ring-amber-500`
- Badges: `rounded-full px-2 py-0.5 text-xs font-medium`

---

## Appendix: Tax Calculation Examples

### Tax Type: Add
```
Base Price: $100.00
Tax Rate: 7%
Tax Amount: $7.00
Total: $107.00
```

### Tax Type: Include
```
Total Price: $100.00
Tax Rate: 7%
Net Amount: $93.46 ($100 / 1.07)
Tax Amount: $6.54
Total: $100.00
```

### Tax Type: None
```
Base Price: $100.00
Tax Rate: N/A
Tax Amount: $0.00
Total: $100.00
```
