# Golf Queries

query GetTeeSheet($courseId: ID!, $date: DateTime!) {
  teeSheet(courseId: $courseId, date: $date) {
    time
    courseId
    date
    available
    booking {
      id
      teeTimeNumber
      teeDate
      teeTime
      holes
      status
      notes
      players {
        id
        position
        playerType
        member {
          id
          memberId
          firstName
          lastName
        }
        guestName
        guestEmail
        guestPhone
        cartType
        caddyRequest
        cartRequest
        rentalRequest
        cartStatus
        caddyStatus
        sharedWithPosition
        caddy {
          id
          caddyNumber
          firstName
          lastName
        }
        checkedInAt
      }
      bookingGroups {
        id
        groupNumber
        bookedBy {
          id
          name
          memberId
        }
        playerIds
      }
    }
  }
}

query GetCourses {
  courses {
    id
    name
    code
    description
    holes
    par
    slope
    rating
    firstTeeTime
    lastTeeTime
    teeInterval
    isActive
  }
}

query GetTeeTime($id: ID!) {
  teeTime(id: $id) {
    id
    teeTimeNumber
    teeDate
    teeTime
    holes
    status
    notes
    createdAt
    updatedAt
    course {
      id
      name
      code
      holes
      par
    }
    players {
      id
      position
      playerType
      member {
        id
        memberId
        firstName
        lastName
      }
      guestName
      guestEmail
      guestPhone
      cartType
      caddyRequest
      cartRequest
      rentalRequest
      cartStatus
      caddyStatus
      sharedWithPosition
      caddy {
        id
        caddyNumber
        firstName
        lastName
        phone
        isActive
      }
      checkedInAt
    }
  }
}

query GetTeeTimes(
  $courseId: ID
  $startDate: DateTime
  $endDate: DateTime
  $status: TeeTimeStatus
  $memberId: ID
  $first: Int
  $skip: Int
) {
  teeTimes(
    courseId: $courseId
    startDate: $startDate
    endDate: $endDate
    status: $status
    memberId: $memberId
    first: $first
    skip: $skip
  ) {
    edges {
      node {
        id
        teeTimeNumber
        teeDate
        teeTime
        holes
        status
        course {
          id
          name
          code
        }
        players {
          id
          position
          playerType
          member {
            id
            memberId
            firstName
            lastName
          }
          guestName
        }
      }
      cursor
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    totalCount
  }
}

# Golf Mutations

mutation CreateTeeTime($input: CreateTeeTimeInput!) {
  createTeeTime(input: $input) {
    id
    teeTimeNumber
    teeDate
    teeTime
    holes
    status
    course {
      id
      name
    }
    players {
      id
      position
      playerType
      member {
        id
        firstName
        lastName
      }
      guestName
    }
  }
}

mutation UpdateTeeTime($id: ID!, $input: UpdateTeeTimeInput!) {
  updateTeeTime(id: $id, input: $input) {
    id
    teeTimeNumber
    status
    updatedAt
  }
}

mutation UpdateTeeTimePlayers($id: ID!, $players: [TeeTimePlayerInput!]!) {
  updateTeeTimePlayers(id: $id, players: $players) {
    id
    teeTimeNumber
    teeDate
    teeTime
    holes
    status
    course {
      id
      name
    }
    players {
      id
      position
      playerType
      member {
        id
        firstName
        lastName
      }
      guestName
      guestEmail
      guestPhone
      cartType
      caddyRequest
      cartRequest
      rentalRequest
      cartStatus
      caddyStatus
    }
  }
}

mutation CheckInTeeTime($input: CheckInInput!) {
  checkIn(input: $input) {
    success
    booking {
      id
      status
    }
    error
  }
}

mutation CancelTeeTime($id: ID!, $reason: String) {
  cancelTeeTime(id: $id, reason: $reason) {
    message
  }
}

mutation MoveTeeTime($id: ID!, $input: MoveTeeTimeInput!) {
  moveTeeTime(id: $id, input: $input) {
    id
    teeDate
    teeTime
    status
    course {
      id
      name
    }
  }
}

mutation UpdatePlayerRentalStatus($playerId: ID!, $input: UpdatePlayerRentalStatusInput!) {
  updatePlayerRentalStatus(playerId: $playerId, input: $input) {
    id
    position
    playerType
    cartStatus
    caddyStatus
    caddy {
      id
      caddyNumber
      firstName
      lastName
    }
  }
}

# Week View Occupancy Query
query GetWeekViewOccupancy($input: WeekViewOccupancyInput!) {
  weekViewOccupancy(input: $input) {
    slots {
      date
      time
      nine
      isBlocked
      positions {
        position
        status
        player {
          id
          name
          type
          memberId
        }
      }
    }
  }
}

# Caddies Query
query SearchCaddies($search: String, $courseId: ID) {
  searchCaddies(search: $search, courseId: $courseId) {
    id
    caddyNumber
    firstName
    lastName
    phone
    isActive
  }
}
